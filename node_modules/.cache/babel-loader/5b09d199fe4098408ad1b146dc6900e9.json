{"ast":null,"code":"import { todolistsAPI } from '../../api/todolists-api';\nimport { setAppErrorAC, setAppStatusAC } from \"../../app/app-reducer\";\nconst initialState = [];\nexport const todolistsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'REMOVE-TODOLIST':\n      return state.filter(tl => tl.id !== action.id);\n\n    case 'ADD-TODOLIST':\n      return [{ ...action.todolist,\n        filter: 'all',\n        entityStatus: 'idle'\n      }, ...state];\n\n    case 'CHANGE-TODOLIST-TITLE':\n      return state.map(tl => tl.id === action.id ? { ...tl,\n        title: action.title\n      } : tl);\n\n    case 'CHANGE-TODOLIST-FILTER':\n      return state.map(tl => tl.id === action.id ? { ...tl,\n        filter: action.filter\n      } : tl);\n\n    case 'SET-TODOLISTS':\n      return action.todolists.map(tl => ({ ...tl,\n        filter: 'all',\n        entityStatus: 'idle'\n      }));\n\n    case 'CHANGE-TODOLIST-ENTITY-STATUS':\n      return state.map(tl => tl.id === action.id ? { ...tl,\n        entityStatus: action.entityStatus\n      } : tl);\n\n    default:\n      return state;\n  }\n}; // actions\n\nexport const removeTodolistAC = id => ({\n  type: 'REMOVE-TODOLIST',\n  id\n});\nexport const addTodolistAC = todolist => ({\n  type: 'ADD-TODOLIST',\n  todolist\n});\nexport const changeTodolistTitleAC = (id, title) => ({\n  type: 'CHANGE-TODOLIST-TITLE',\n  id,\n  title\n});\nexport const changeTodolistFilterAC = (id, filter) => ({\n  type: 'CHANGE-TODOLIST-FILTER',\n  id,\n  filter\n});\nexport const setTodolistsAC = todolists => ({\n  type: 'SET-TODOLISTS',\n  todolists\n});\nexport const changeTodolistEntityStatusAC = (id, entityStatus) => ({\n  type: 'CHANGE-TODOLIST-ENTITY-STATUS',\n  id,\n  entityStatus\n}); // thunks\n\nexport const fetchTodolistsTC = () => {\n  return dispatch => {\n    dispatch(setAppStatusAC('loading'));\n    todolistsAPI.getTodolists().then(res => {\n      dispatch(setTodolistsAC(res.data));\n      dispatch(setAppStatusAC('succeeded'));\n    });\n  };\n};\nexport const removeTodolistTC = todolistId => {\n  return dispatch => {\n    dispatch(setAppStatusAC('loading'));\n    dispatch(changeTodolistEntityStatusAC(todolistId, 'loading'));\n    todolistsAPI.deleteTodolist(todolistId).then(res => {\n      dispatch(removeTodolistAC(todolistId));\n      dispatch(setAppStatusAC('succeeded'));\n      dispatch(changeTodolistEntityStatusAC(todolistId, 'succeeded'));\n    });\n  };\n};\nexport const addTodolistTC = title => {\n  return dispatch => {\n    dispatch(setAppStatusAC('loading'));\n    todolistsAPI.createTodolist(title).then(res => {\n      if (res.data.resultCode === 0) {\n        dispatch(addTodolistAC(res.data.data.item));\n        dispatch(setAppStatusAC('succeeded'));\n      } else {\n        dispatch(setAppErrorAC(res.data.messages[0]));\n        dispatch(setAppStatusAC('failed'));\n      }\n    });\n  };\n};\nexport const changeTodolistTitleTC = (id, title) => {\n  return dispatch => {\n    dispatch(setAppStatusAC('loading'));\n    todolistsAPI.updateTodolist(id, title).then(res => {\n      dispatch(changeTodolistTitleAC(id, title));\n      dispatch(setAppStatusAC('succeeded'));\n    });\n  };\n}; // types","map":{"version":3,"sources":["D:/it-incubator/REACT_TSX - Todolist15/src/features/TodolistsList/todolists-reducer.ts"],"names":["todolistsAPI","setAppErrorAC","setAppStatusAC","initialState","todolistsReducer","state","action","type","filter","tl","id","todolist","entityStatus","map","title","todolists","removeTodolistAC","addTodolistAC","changeTodolistTitleAC","changeTodolistFilterAC","setTodolistsAC","changeTodolistEntityStatusAC","fetchTodolistsTC","dispatch","getTodolists","then","res","data","removeTodolistTC","todolistId","deleteTodolist","addTodolistTC","createTodolist","resultCode","item","messages","changeTodolistTitleTC","updateTodolist"],"mappings":"AAAA,SAAQA,YAAR,QAAyC,yBAAzC;AAEA,SAA2CC,aAA3C,EAA0DC,cAA1D,QAA+E,uBAA/E;AAEA,MAAMC,YAAuC,GAAG,EAAhD;AAEA,OAAO,MAAMC,gBAAgB,GAAG,CAACC,KAAgC,GAAGF,YAApC,EAAkDG,MAAlD,KAAqG;AACjI,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,iBAAL;AACI,aAAOF,KAAK,CAACG,MAAN,CAAaC,EAAE,IAAIA,EAAE,CAACC,EAAH,KAAUJ,MAAM,CAACI,EAApC,CAAP;;AACJ,SAAK,cAAL;AACI,aAAO,CAAC,EAAC,GAAGJ,MAAM,CAACK,QAAX;AAAqBH,QAAAA,MAAM,EAAE,KAA7B;AAAoCI,QAAAA,YAAY,EAAE;AAAlD,OAAD,EAA4D,GAAGP,KAA/D,CAAP;;AACJ,SAAK,uBAAL;AACI,aAAOA,KAAK,CAACQ,GAAN,CAAUJ,EAAE,IAAIA,EAAE,CAACC,EAAH,KAAUJ,MAAM,CAACI,EAAjB,GAAsB,EAAC,GAAGD,EAAJ;AAAQK,QAAAA,KAAK,EAAER,MAAM,CAACQ;AAAtB,OAAtB,GAAqDL,EAArE,CAAP;;AACJ,SAAK,wBAAL;AACI,aAAOJ,KAAK,CAACQ,GAAN,CAAUJ,EAAE,IAAIA,EAAE,CAACC,EAAH,KAAUJ,MAAM,CAACI,EAAjB,GAAsB,EAAC,GAAGD,EAAJ;AAAQD,QAAAA,MAAM,EAAEF,MAAM,CAACE;AAAvB,OAAtB,GAAuDC,EAAvE,CAAP;;AACJ,SAAK,eAAL;AACI,aAAOH,MAAM,CAACS,SAAP,CAAiBF,GAAjB,CAAqBJ,EAAE,KAAK,EAAC,GAAGA,EAAJ;AAAQD,QAAAA,MAAM,EAAE,KAAhB;AAAuBI,QAAAA,YAAY,EAAE;AAArC,OAAL,CAAvB,CAAP;;AACJ,SAAK,+BAAL;AACI,aAAOP,KAAK,CAACQ,GAAN,CAAUJ,EAAE,IAAIA,EAAE,CAACC,EAAH,KAAUJ,MAAM,CAACI,EAAjB,GAAsB,EAAC,GAAGD,EAAJ;AAAQG,QAAAA,YAAY,EAAEN,MAAM,CAACM;AAA7B,OAAtB,GAAmEH,EAAnF,CAAP;;AAEJ;AACI,aAAOJ,KAAP;AAfR;AAiBH,CAlBM,C,CAoBP;;AACA,OAAO,MAAMW,gBAAgB,GAAIN,EAAD,KAAiB;AAACH,EAAAA,IAAI,EAAE,iBAAP;AAA0BG,EAAAA;AAA1B,CAAjB,CAAzB;AACP,OAAO,MAAMO,aAAa,GAAIN,QAAD,KAA6B;AAACJ,EAAAA,IAAI,EAAE,cAAP;AAAuBI,EAAAA;AAAvB,CAA7B,CAAtB;AACP,OAAO,MAAMO,qBAAqB,GAAG,CAACR,EAAD,EAAaI,KAAb,MAAgC;AACjEP,EAAAA,IAAI,EAAE,uBAD2D;AAEjEG,EAAAA,EAFiE;AAGjEI,EAAAA;AAHiE,CAAhC,CAA9B;AAKP,OAAO,MAAMK,sBAAsB,GAAG,CAACT,EAAD,EAAaF,MAAb,MAA2C;AAC7ED,EAAAA,IAAI,EAAE,wBADuE;AAE7EG,EAAAA,EAF6E;AAG7EF,EAAAA;AAH6E,CAA3C,CAA/B;AAKP,OAAO,MAAMY,cAAc,GAAIL,SAAD,KAAqC;AAACR,EAAAA,IAAI,EAAE,eAAP;AAAwBQ,EAAAA;AAAxB,CAArC,CAAvB;AACP,OAAO,MAAMM,4BAA4B,GAAG,CAACX,EAAD,EAAaE,YAAb,MAAkD;AAC1FL,EAAAA,IAAI,EAAE,+BADoF;AAE1FG,EAAAA,EAF0F;AAG1FE,EAAAA;AAH0F,CAAlD,CAArC,C,CAMP;;AACA,OAAO,MAAMU,gBAAgB,GAAG,MAAM;AAClC,SAAQC,QAAD,IAAqC;AACxCA,IAAAA,QAAQ,CAACrB,cAAc,CAAC,SAAD,CAAf,CAAR;AACAF,IAAAA,YAAY,CAACwB,YAAb,GACKC,IADL,CACWC,GAAD,IAAS;AACXH,MAAAA,QAAQ,CAACH,cAAc,CAACM,GAAG,CAACC,IAAL,CAAf,CAAR;AACAJ,MAAAA,QAAQ,CAACrB,cAAc,CAAC,WAAD,CAAf,CAAR;AACH,KAJL;AAKH,GAPD;AAQH,CATM;AAUP,OAAO,MAAM0B,gBAAgB,GAAIC,UAAD,IAAwB;AACpD,SAAQN,QAAD,IAAqC;AACxCA,IAAAA,QAAQ,CAACrB,cAAc,CAAC,SAAD,CAAf,CAAR;AACAqB,IAAAA,QAAQ,CAACF,4BAA4B,CAACQ,UAAD,EAAa,SAAb,CAA7B,CAAR;AACA7B,IAAAA,YAAY,CAAC8B,cAAb,CAA4BD,UAA5B,EACKJ,IADL,CACWC,GAAD,IAAS;AACXH,MAAAA,QAAQ,CAACP,gBAAgB,CAACa,UAAD,CAAjB,CAAR;AACAN,MAAAA,QAAQ,CAACrB,cAAc,CAAC,WAAD,CAAf,CAAR;AACAqB,MAAAA,QAAQ,CAACF,4BAA4B,CAACQ,UAAD,EAAa,WAAb,CAA7B,CAAR;AACH,KALL;AAMH,GATD;AAUH,CAXM;AAYP,OAAO,MAAME,aAAa,GAAIjB,KAAD,IAAmB;AAC5C,SAAQS,QAAD,IAAqC;AACxCA,IAAAA,QAAQ,CAACrB,cAAc,CAAC,SAAD,CAAf,CAAR;AACAF,IAAAA,YAAY,CAACgC,cAAb,CAA4BlB,KAA5B,EACKW,IADL,CACWC,GAAD,IAAS;AACX,UAAIA,GAAG,CAACC,IAAJ,CAASM,UAAT,KAAwB,CAA5B,EAAgC;AAC5BV,QAAAA,QAAQ,CAACN,aAAa,CAACS,GAAG,CAACC,IAAJ,CAASA,IAAT,CAAcO,IAAf,CAAd,CAAR;AACAX,QAAAA,QAAQ,CAACrB,cAAc,CAAC,WAAD,CAAf,CAAR;AACH,OAHD,MAGO;AACHqB,QAAAA,QAAQ,CAACtB,aAAa,CAACyB,GAAG,CAACC,IAAJ,CAASQ,QAAT,CAAkB,CAAlB,CAAD,CAAd,CAAR;AACAZ,QAAAA,QAAQ,CAACrB,cAAc,CAAC,QAAD,CAAf,CAAR;AACH;AACJ,KATL;AAUH,GAZD;AAaH,CAdM;AAeP,OAAO,MAAMkC,qBAAqB,GAAG,CAAC1B,EAAD,EAAaI,KAAb,KAA+B;AAChE,SAAQS,QAAD,IAAqC;AACxCA,IAAAA,QAAQ,CAACrB,cAAc,CAAC,SAAD,CAAf,CAAR;AACAF,IAAAA,YAAY,CAACqC,cAAb,CAA4B3B,EAA5B,EAAgCI,KAAhC,EACKW,IADL,CACWC,GAAD,IAAS;AACXH,MAAAA,QAAQ,CAACL,qBAAqB,CAACR,EAAD,EAAKI,KAAL,CAAtB,CAAR;AACAS,MAAAA,QAAQ,CAACrB,cAAc,CAAC,WAAD,CAAf,CAAR;AACH,KAJL;AAKH,GAPD;AAQH,CATM,C,CAWP","sourcesContent":["import {todolistsAPI, TodolistType} from '../../api/todolists-api'\r\nimport {Dispatch} from 'redux'\r\nimport {AppActionsType, RequestStatusType, setAppErrorAC, setAppStatusAC} from \"../../app/app-reducer\";\r\n\r\nconst initialState: Array<TodolistDomainType> = []\r\n\r\nexport const todolistsReducer = (state: Array<TodolistDomainType> = initialState, action: ActionsType): Array<TodolistDomainType> => {\r\n    switch (action.type) {\r\n        case 'REMOVE-TODOLIST':\r\n            return state.filter(tl => tl.id !== action.id)\r\n        case 'ADD-TODOLIST':\r\n            return [{...action.todolist, filter: 'all', entityStatus: 'idle'}, ...state]\r\n        case 'CHANGE-TODOLIST-TITLE':\r\n            return state.map(tl => tl.id === action.id ? {...tl, title: action.title} : tl)\r\n        case 'CHANGE-TODOLIST-FILTER':\r\n            return state.map(tl => tl.id === action.id ? {...tl, filter: action.filter} : tl)\r\n        case 'SET-TODOLISTS':\r\n            return action.todolists.map(tl => ({...tl, filter: 'all', entityStatus: 'idle'}))\r\n        case 'CHANGE-TODOLIST-ENTITY-STATUS':\r\n            return state.map(tl => tl.id === action.id ? {...tl, entityStatus: action.entityStatus} : tl)\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n// actions\r\nexport const removeTodolistAC = (id: string) => ({type: 'REMOVE-TODOLIST', id} as const)\r\nexport const addTodolistAC = (todolist: TodolistType) => ({type: 'ADD-TODOLIST', todolist} as const)\r\nexport const changeTodolistTitleAC = (id: string, title: string) => ({\r\n    type: 'CHANGE-TODOLIST-TITLE',\r\n    id,\r\n    title\r\n} as const)\r\nexport const changeTodolistFilterAC = (id: string, filter: FilterValuesType) => ({\r\n    type: 'CHANGE-TODOLIST-FILTER',\r\n    id,\r\n    filter\r\n} as const)\r\nexport const setTodolistsAC = (todolists: Array<TodolistType>) => ({type: 'SET-TODOLISTS', todolists} as const)\r\nexport const changeTodolistEntityStatusAC = (id: string, entityStatus: RequestStatusType) => ({\r\n    type: 'CHANGE-TODOLIST-ENTITY-STATUS',\r\n    id,\r\n    entityStatus\r\n} as const)\r\n\r\n// thunks\r\nexport const fetchTodolistsTC = () => {\r\n    return (dispatch: Dispatch<ActionsType>) => {\r\n        dispatch(setAppStatusAC('loading'))\r\n        todolistsAPI.getTodolists()\r\n            .then((res) => {\r\n                dispatch(setTodolistsAC(res.data))\r\n                dispatch(setAppStatusAC('succeeded'))\r\n            })\r\n    }\r\n}\r\nexport const removeTodolistTC = (todolistId: string) => {\r\n    return (dispatch: Dispatch<ActionsType>) => {\r\n        dispatch(setAppStatusAC('loading'))\r\n        dispatch(changeTodolistEntityStatusAC(todolistId, 'loading'))\r\n        todolistsAPI.deleteTodolist(todolistId)\r\n            .then((res) => {\r\n                dispatch(removeTodolistAC(todolistId))\r\n                dispatch(setAppStatusAC('succeeded'))\r\n                dispatch(changeTodolistEntityStatusAC(todolistId, 'succeeded'))\r\n            })\r\n    }\r\n}\r\nexport const addTodolistTC = (title: string) => {\r\n    return (dispatch: Dispatch<ActionsType>) => {\r\n        dispatch(setAppStatusAC('loading'))\r\n        todolistsAPI.createTodolist(title)\r\n            .then((res) => {\r\n                if (res.data.resultCode === 0 ) {\r\n                    dispatch(addTodolistAC(res.data.data.item))\r\n                    dispatch(setAppStatusAC('succeeded'))\r\n                } else {\r\n                    dispatch(setAppErrorAC(res.data.messages[0]))\r\n                    dispatch(setAppStatusAC('failed'))\r\n                }\r\n            })\r\n    }\r\n}\r\nexport const changeTodolistTitleTC = (id: string, title: string) => {\r\n    return (dispatch: Dispatch<ActionsType>) => {\r\n        dispatch(setAppStatusAC('loading'))\r\n        todolistsAPI.updateTodolist(id, title)\r\n            .then((res) => {\r\n                dispatch(changeTodolistTitleAC(id, title))\r\n                dispatch(setAppStatusAC('succeeded'))\r\n            })\r\n    }\r\n}\r\n\r\n// types\r\nexport type ChangeTodolistEntityStatusActionType = ReturnType<typeof changeTodolistEntityStatusAC>\r\nexport type AddTodolistActionType = ReturnType<typeof addTodolistAC>;\r\nexport type RemoveTodolistActionType = ReturnType<typeof removeTodolistAC>;\r\nexport type SetTodolistsActionType = ReturnType<typeof setTodolistsAC>;\r\ntype ActionsType =\r\n    | RemoveTodolistActionType\r\n    | AddTodolistActionType\r\n    | ReturnType<typeof changeTodolistTitleAC>\r\n    | ReturnType<typeof changeTodolistFilterAC>\r\n    | SetTodolistsActionType\r\n    | AppActionsType\r\n    | ChangeTodolistEntityStatusActionType\r\nexport type FilterValuesType = 'all' | 'active' | 'completed';\r\nexport type TodolistDomainType = TodolistType & {\r\n    filter: FilterValuesType\r\n    entityStatus: RequestStatusType\r\n}\r\n"]},"metadata":{},"sourceType":"module"}